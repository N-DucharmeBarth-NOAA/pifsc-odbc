% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/downloads.R
\name{download_observer_tables}
\alias{download_observer_tables}
\title{Download observer tables from LOTUS database}
\usage{
download_observer_tables(
  tables = c("LDS_SET_ENVIRON_V", "LDS_CATCH_V", "LDS_GEAR_CFG_V"),
  schema = "newobs",
  dsn = "PIRO LOTUS",
  output_dir = NULL,
  timestamp = TRUE,
  year_col = "HAULBEGIN_YR",
  n_cores = NULL
)
}
\arguments{
\item{tables}{Character vector. Table names to download. Default:
\code{c("LDS_SET_ENVIRON_V", "LDS_CATCH_V", "LDS_GEAR_CFG_V")}.}

\item{schema}{Character. Schema name. Default: "newobs".}

\item{dsn}{Character. ODBC Data Source Name. Default: "PIRO LOTUS".}

\item{output_dir}{Character or NULL. Directory to save CSV files. If NULL
(default), data is returned but not saved.}

\item{timestamp}{Logical. If TRUE and \code{output_dir} is provided, append
timestamp to output filenames in format TABLE_YYYYMMDDHHMMSS.csv.
Default: TRUE.}

\item{year_col}{Character or NULL. Name of the year column used for parallel
partitioning. If NULL, tables are downloaded sequentially with a single
connection. Default: "HAULBEGIN_YR".}

\item{n_cores}{Integer or NULL. Number of parallel workers. If NULL
(default), determined by \code{optimal_cores()}. Ignored when
\code{year_col} is NULL.}
}
\value{
A named list of \code{data.table} objects, one per table.
}
\description{
Convenience function for downloading observer data from the PIRO LOTUS
database using a DSN connection. By default, tables are downloaded in
parallel by partitioning on a year column. Set \code{year_col = NULL} to
fall back to sequential single-threaded downloads.
}
\examples{
\dontrun{
# Download default tables in parallel (uses HAULBEGIN_YR)
obs <- download_observer_tables()

# Download and save to disk with timestamps
obs <- download_observer_tables(output_dir = "obs-data", timestamp = TRUE)

# Download custom tables
obs <- download_observer_tables(
  tables = c("LDS_CATCH_V", "LDS_SET_ENVIRON_V"),
  output_dir = "obs-data"
)

# Fall back to single-threaded download
obs <- download_observer_tables(year_col = NULL)
}
}
